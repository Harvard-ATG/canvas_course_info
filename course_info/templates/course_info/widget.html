{% extends 'base.html' %}
{% load static %}
{% block extra_head %}
    <base target="_blank">
{% endblock %}
{% block extra_js %}
  <script type="text/javascript" charset="utf8">
    function getOffsetHeightWithMargins() {
      var
        docStyle = document.defaultView.getComputedStyle(document.body, null),
        docMarginTop = parseInt(docStyle['marginTop'], 10),
        docMarginBottom = parseInt(docStyle['marginBottom'], 10);
      return document.body.offsetHeight + docMarginTop + docMarginBottom;
    }

    function resizeIframe() {
      window.parent.postMessage(
        {
          request: 'changeHeight',
          href: document.location.href,
          height: getOffsetHeightWithMargins() + 'px'
        },
        '*'  // needs to match multiple canvas domains
      );
    }

    setTimeout(resizeIframe, 0);
  </script>
{% endblock %}

{% block content %}
    <div id="course_info_container" class="container-fluid">
        <ul class="list-group course-info-widget-field-list">

          {% for field in fields %}

            {% if field.key == 'title' %}
              <li class="list-group-item list-group-item-info panel-title">
                <strong>{{ field.value }}</strong>
              </li>

            {% elif field.key == 'course.registrar_code_display' %}
              <li class="list-group-item">
                {% if field.value and school_title %}
                  <strong>{{ school_title }}:</strong> {{ field.value }}
                {% else %}
                  <strong>{{ field.label }}:</strong> Field not populated by registrar
                {% endif %}

            {% else %}
              <li class="list-group-item">
                <strong>{{ field.label }}:</strong>
                {% if field.value %}
                  {{ field.value }}
                {% else %}
                  Field not populated by registrar
                {% endif %}
              </li>

            {% endif %}

          {% endfor %}

        </ul>

        {% if show_registrar_fields_message %}
          Additional information will be shown if available from the Registrar.
        {% endif %}

    </div>

{% endblock %}
